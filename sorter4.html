# btsorter


<!doctype HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<title>My Little Pony Favourite Episode Sorter</title>
<script type="text/javascript">
<!--
var namMember = new Array(
	"1x01-02 Friendship is Magic (Parts 1+2)",
	"1x03 The Ticket Master",
	"1x04 Applebuck Season",
	"1x05 Griffon the Brush-Off",
	"1x06 Boast Busters",
	"1x07 Dragonshy",
	"1x08 Look Before you Sleep",
	"1x09 Bridle Gossip",
	"1x10 Swarm of the Century",
	"1x11 Winter Wrap Up",
	"1x12 Call of the Cutie",
	"1x13 Fall Weather Friends",
	"1x14 Suited for Success",
	"1x15 Feeling Pinkie Keen",
	"1x16 Sonic Rainboom",
	"1x17 Stare Master",
	"1x18 The Show Stoppers",
	"1x19 A Dog and Pony Show",
	"1x20 Green Isn't Your Colour",
	"1x21 Over a Barrel",
	"1x22 A Bird in the Hoof",
	"1x23 The Cutie Mark Chronicles",
	"1x24 Owl's Well That Ends Well",
	"1x25 Party of One",
	"1x26 The Best Night Ever",
	"2x01-02 The Return of Harmony (Parts 1+2)",
	"2x03 Lesson Zero",
	"2x04 Luna Eclipsed",
	"2x05 Sisterhooves Social",
	"2x06 The Cutie Pox",
	"2x07 May the Best Pet Win!",
	"2x08 The Mysterious Mare Do Well",
	"2x09 Sweet and Elite",
	"2x10 Secret of My Excess",
	"2x11 Hearth's Warming Eve",
	"2x12 Family Appreciation Day",
	"2x13 Baby Cakes",
	"2x14 The Last Roundup",
	"2x15 The Super Speedy Cider Squeezy 6000",
	"2x16 Read It and Weep",
	"2x17 Hearts and Hooves Day",
	"2x18 A Friend in Deed",
	"2x19 Putting Your Hoof Down",
	"2x20 It's About Time",
	"2x21 Dragon Quest",
	"2x22 Hurricane Fluttershy",
	"2x23 Ponyville Confidential",
	"2x24 MMMystery on the Friendship Express",
	"2x25-26 A Canderlot Wedding (Parts 1+2)",
	"3x01-02 The Crystal Empire (Parts 1+2)",
	"3x03 Too Many Pinkie Pies",
	"3x04 One Bad Apple",
	"3x05 Magic Duel",
	"3x06 Sleepless in Ponyville",
	"3x07 Wonderbolts Academy",
	"3x08 Apple Family Reunion",
	"3x09 Spike at Your Service",
	"3x10 Keep Calm and Flutter On",
	"3x11 Just For Sidekicks",
	"3x12 Games Ponies Play",
	"3x13 Magical Mystery Cure",
	"4x01-02 Princess Twilight Sparkle",
	"4x03 Castle Mane-ia",
	"4x04 Daring Don't",
	"4x05 Flight to the Finish",
	"4x06 Power Ponies",
	"4x07 Bats!",
	"4x08 Rarity Takes Manehattan",
	"4x09 Pinkie Apple Pie",
	"4x10 Rainbow Falls",
	"4x11 Three's a Crowd",
	"4x12 Pinkie Pride",
	"4x13 Simple Ways",
	"4x14 Filli Vanilli",
	"4x15 Twilight Time",
	"4x16 It Ain't Easy Being Breezies",
	"4x17 Somepony to Watch Over Me",
	"4x18 Maud Pie",
	"4x19 For Whom the Sweetie Belle Toils",
	"4x20 Leap of Faith",
	"4x21 Testing Testing 1, 2, 3",
	"4x22 Trade Ya!",
	"4x23 Inspiration Manifestation",
	"4x24 Equestria Games",
	"4x25-26 Twilight's Kingdom",
	"5x01-02 The Cutie Map",	
	"5x03 Castle Sweet Castle",
	"5x04 Bloom and Gloom",
	"5x05 Tanks for the Memories",
	"5x06 Appleoosa's Most Wanted",
	"5x07 Make New Friends but Keep Discord",
	"5x08 The Lost Treasure of Griffonstone",
	"5x09 Slice of Life",
	"5x10 Princess Spike",
	"5x11 Party Pooped",
	"5x12 Amending Fences",
	"5x13 Do Princesses Dream of Magic Sheep?",
	"5x14 Canterlot Boutique",
	"5x15 Rarity Investigates!",
	"5x16 Made in Manehattan",
	"5x17 Brotherhooves Social",
	"5x18 Crusaders of the Lost Mark",
	"5x19 The One Where Pinkie Pie Knows",
	"5x20 Hearthbreakers",
	"5x21 Scare Master",
	"5x22 What About Discord?",
	"5x23 The Hooffields and McColts",
	"5x24 The Mane Attraction",
	"5x25-26 The Cutie Re-Mark",
	"6x01-02 The Crystalling",
	"6x03 The Gift of the Maud Pie",
	"6x04 On Your Marks",
	"6x05 Gauntlet of Fire",
	"6x06 No Second Prances",
	"6x07 Newbie Dash",
	"6x08 A Hearth's Warming Tail",
	"6x09 The Saddle Row Review",
	"6x10 Applejack's &quot;Day&quot; Off",
	"6x11 Flutter Brutter",
	"6x12 Spice Up Your Life",
	"6x13 Stranger Than Fan Fiction",
	"6x14 The Cart Before the Ponies",
	"6x15 28 Pranks Later",
	"6x16 The Times They Are A Changeling",
	"6x17 Dungeons and Discords",
	"6x18 Buckball Season",
	"6x19 The Fault in Our Cutie Marks",
	"6x20 Viva Las Pegasus",
	"6x21 Every Little Thing She Does",
	"6x22 P.P.O.V. (Pony Point of View)",
	"6x23 Where the Apple Lies",
	"6x24 Top Bolt",
	"6x25-26 To Where and Back Again",
	"7x01 Celestial Advice",
	"7x02 All Bottled Up",
	"7x03 A Flurry of Emotions",
	"7x04 Rock Solid Friendship",
	"7x05 Fluttershy Leans In",
	"7x06 Forever Filly",
	"7x07 Parental Glideance",
	"7x08 Hard to Say Anything",
	"7x09 Honest Apple",
	"7x10 A Royal Problem",
	"7x11 Not Asking for Trouble",
	"7x12 Discordant Harmony",
	"7x13 The Perfect Pear",
	"7x14 Fame and Misfortune",
	"7x15 Triple Threat",
	"7x16 Campfire Tales",
	"7x17 To Change a Changeling",
	"7x18 Daring Done?",
	"7x19 It Isn't the Mane Thing About You",
	"7x20 A Health of Information",
	"7x21 Marks and Recreation",
	"7x22 Once Upon a Zeppelin",
	"7x23 Secrets and Pies",
	"7x24 Uncommon Bond",
	"7x25-26 Shadow Play",
	"8x01-02 School Daze",
	"8x03 The Maud Couple",
	"8x04 Fake It 'Til You Make It",
	"8x05 Grannies Gone Wild",
	"8x06 Surf and/or Turf",
	"8x07 Horse Play",
	"8x08 The Parent Map",
	"8x09 Non-Compete Clause",
	"8x10 The Break Up Break Down",
	"8x11 Molt Down",
	"8x12 Marks for Effort",
	"8x13 The Mean 6",
	"8x14 A Matter of Principals", 
	"8x15 The Hearth's Warming Club", 
	"8x16 Friendship University", 
	"8x17 The End in Friend", 
	"8x18 Yakity-Sax", 
	"8x19 Road to Friendship", 
	"8x20 The Washout", 
	"8x21 A Rockhoof and a Hard Place", 
	"8x22 What Lies Beneath", 
	"8x23 Sounds of Silence" 
	);

	
//*********************************************************

var lstMember = new Array();
var parent = new Array();
var equal = new Array();
var rec = new Array();
var cmp1,cmp2;
var head1,head2;
var nrec;

var origMember = new Array();

var numQuestion;
var totalSize;
var finishSize;
var finishFlag;

//The initialization of the variable+++++++++++++++++++++++++++++++++++++++++++++
function initList(){
	var n = 0;
	var mid;
	var i;

	//The sequence that you should sort
	lstMember[n] = new Array();
	for (i=0; i<namMember.length; i++) {
		lstMember[n][i] = i;
	}
	parent[n] = -1;
	totalSize = 0;
	n++;

	for (i=0; i<lstMember.length; i++) {
		//And element divides it in two/more than two
		//Increase divided sequence of last in first member
		if(lstMember[i].length>=2) {
			mid = Math.ceil(lstMember[i].length/2);
			lstMember[n] = new Array();
			lstMember[n] = lstMember[i].slice(0,mid);
			totalSize += lstMember[n].length;
			parent[n] = i;
			n++;
			lstMember[n] = new Array();
			lstMember[n] = lstMember[i].slice(mid,lstMember[i].length);
			totalSize += lstMember[n].length;
			parent[n] = i;
			n++;
		}
	}

	//Preserve this sequence
	for (i=0; i<namMember.length; i++) {
		rec[i] = 0;
	}
	nrec = 0;

	//List that keeps your results
	//Value of link initial
	// Value of link initial
	for (i=0; i<=namMember.length; i++) {
		equal[i] = -1;
	}

	cmp1 = lstMember.length-2;
	cmp2 = lstMember.length-1;
	head1 = 0;
	head2 = 0;
	numQuestion = 1;
	finishSize = 0;
	finishFlag = 0;
}

//&#12522;&#12473;&#12488;&#12398;&#12477;&#12540;&#12488;+++++++++++++++++++++++++++++++++++++++++++
//flag&#65306;Don't know characters
//  -1&#65306;Chose the left
//   0&#65306;Tie
//   1&#65306;Chose the right
function sortList(flag){
	var i;
	var str;

	//rec preservation
	if (flag<0) {
		rec[nrec] = lstMember[cmp1][head1];
		head1++;
		nrec++;
		finishSize++;
		while (equal[rec[nrec-1]]!=-1) {
			rec[nrec] = lstMember[cmp1][head1];
			head1++;
			nrec++;
			finishSize++;
		}
	}
	else if (flag>0) {
		rec[nrec] = lstMember[cmp2][head2];
		head2++;
		nrec++;
		finishSize++;
		while (equal[rec[nrec-1]]!=-1) {
			rec[nrec] = lstMember[cmp2][head2];
			head2++;
			nrec++;
			finishSize++;
		}
	}
	else {
		rec[nrec] = lstMember[cmp1][head1];
		head1++;
		nrec++;
		finishSize++;
		while (equal[rec[nrec-1]]!=-1) {
			rec[nrec] = lstMember[cmp1][head1];
			head1++;
			nrec++;
			finishSize++;
		}
		equal[rec[nrec-1]] = lstMember[cmp2][head2];
		rec[nrec] = lstMember[cmp2][head2];
		head2++;
		nrec++;
		finishSize++;
		while (equal[rec[nrec-1]]!=-1) {
			rec[nrec] = lstMember[cmp2][head2];
			head2++;
			nrec++;
			finishSize++;
		}
	}

	//Processing after finishing with one list
	if (head1<lstMember[cmp1].length && head2==lstMember[cmp2].length) {
		//List the remainder of cmp2 copies, list cmp1 copies when finished scanning
		while (head1<lstMember[cmp1].length){
			rec[nrec] = lstMember[cmp1][head1];
			head1++;
			nrec++;
			finishSize++;
		}
	}
	else if (head1==lstMember[cmp1].length && head2<lstMember[cmp2].length) {
		//List the remainder of cmp1 copies, list cmp2 copies when finished scanning
		while (head2<lstMember[cmp2].length){
			rec[nrec] = lstMember[cmp2][head2];
			head2++;
			nrec++;
			finishSize++;
		}
	}

	//When it arrives at the end of both lists
	//Update a pro list
	if (head1==lstMember[cmp1].length && head2==lstMember[cmp2].length) {
		for (i=0; i<lstMember[cmp1].length+lstMember[cmp2].length; i++) {
			lstMember[parent[cmp1]][i] = rec[i];
		}
		lstMember.pop();
		lstMember.pop();
		cmp1 = cmp1-2;
		cmp2 = cmp2-2;
		head1 = 0;
		head2 = 0;

		//Initialize the rec before performing the new comparison
		if (head1==0 && head2==0) {
			for (i=0; i<namMember.length; i++) {
				rec[i] = 0;
			}
			nrec = 0;
		}
	}

	if (cmp1<0) {
		str = "Battle No."+(numQuestion-1)+"<br>"+Math.floor(finishSize*100/totalSize)+"% sorted.";
		document.getElementById("battleNumber").innerHTML = str;

		showResult();
		finishFlag = 1;
	}
	else {
		showImage();
	}
}

//The results+++++++++++++++++++++++++++++++++++++++++++++++
//&#38918;&#20301;=Rank/Grade/Position/Standing/Status
//&#21517;&#21069;=Identification term
function showResult() {
	var ranking = 1;
	var sameRank = 1;
	var str = "";
	var i;

	str += "<table style=\"width:200px; font-size:12px; line-height:120%; margin-left:auto; margin-right:auto; border:1px solid #000; border-collapse:collapse\" align=\"center\">";
	str += "<tr><td style=\"color:#ffffff; background-color:#000; text-align:center;\">Rank<\/td><td style=\"color:#ffffff; background-color:#000; text-align:center;\">Episode<\/td><\/tr>";

	for (i=0; i<namMember.length; i++) {
		str += "<tr><td style=\"border:1px solid #000; text-align:right; padding-right:5px;\">"+ranking+"<\/td><td style=\"border:1px solid #000; padding-left:5px;\">"+namMember[lstMember[0][i]]+"<\/td><\/tr>";
		if (i<namMember.length-1) {
			if (equal[lstMember[0][i]]==lstMember[0][i+1]) {
				sameRank++;
			} else {
				ranking += sameRank;
				sameRank = 1;
			}
		}
	}
	str += "<\/table>";
	
	
	

	for (p=0; p<90; p++){
		origMember[p]=lstMember[0][p];
	}
	origMember.sort(function(a, b){return a-b});
	
	str += "<br><br><center>Top 90 in episode order (to facilitate copying over):</center><br><table style=\"width:200px; font-size:12px; line-height:120%; margin-left:auto; margin-right:auto; border:1px solid #000; border-collapse:collapse\" align=\"center\">";
	str += "<tr><td style=\"color:#ffffff; background-color:#000; text-align:center;\">#<\/td><td style=\"color:#ffffff; background-color:#000; text-align:center;\">Episode<\/td><\/tr>";

	for (f=0; f<90; f++) {
		str += "<tr><td style=\"border:1px solid #000; text-align:right; padding-right:5px;\">"+(f+1)+"<\/td><td style=\"border:1px solid #000; padding-left:5px;\">"+namMember[origMember[f]]+"<\/td><\/tr>";
/*		if (i<namMember.length-1) {
			if (equal[lstMember[0][i]]==lstMember[0][i+1]) {
				sameRank++;
			} else {
				ranking += sameRank;
				sameRank = 1;
			}
		}*/
	}
	str += "<\/table>";	
	

	
	
	
	
	
	
	

	document.getElementById("resultField").innerHTML = str;
}

//Indicates two elements to compare+++++++++++++++++++++++++++++++++++
function showImage() {
	var str0 = "Battle No."+numQuestion+"<br>"+Math.floor(finishSize*100/totalSize)+"% sorted.";
	var str1 = ""+toNameFace(lstMember[cmp1][head1]);
	var str2 = ""+toNameFace(lstMember[cmp2][head2]);

	document.getElementById("battleNumber").innerHTML = str0;
	document.getElementById("leftField").innerHTML = str1;
	document.getElementById("rightField").innerHTML = str2;

	numQuestion++;
}

//Convert numeric value into a name (emoticon)+++++++++++++++++++++++++++++++
function toNameFace(n){
	var str = namMember[n];

	/*
	str += '<br />';
	switch(n) {
		//case -1 Because it is a sample, delete it
		case -1: str+=""; break;
	}*/
	return str;
}
//-->
</script>
<style type="text/css">
<!--
#mainTable{
	font-size: 16px;
	font-family: 'MS PGothic',sans-serif;
	text-align: center;
	vertical-align: middle;
	width: 410px;
	margin-left: auto;
	margin-right: auto;
	border-collapse: separate;
	border-spacing: 10px 5px;
}
#leftField{
	width: 120px;
	height: 150px;
	border: 1px solid #000;
	cursor: pointer;
}
#rightField{
	width: 120px;
	height: 150px;
	border: 1px solid #000;
	cursor: pointer;
}
.middleField{
	width: 120px;
	height: 70px;
	border: 1px solid #000;
	cursor: pointer;
}
a{
	color: #174;
	text-decoration : none;
}
a:hover{
	color: #6b9;
}
body {
	width: 600px;
	margin: 0 auto;
}
-->
</style>
</head>
<body text="#000000" bgcolor="#ffffff" link="#0099ff" vlink="#0099ff" alink="#0099ff">
	
<p class="instructions" style="text-align:center;">
	My Little Pony episode sorter. Choose your favorite episode out of the two shown to get a list of your favorite episodes as calculated by this episode sorter. <br /><br />
	<a href="http://tylian.net/sort/pony.html" target="_blank">I did no work on either the concept or the code; I just stole it blatantly from here.</a><br>
	<a href="https://dl.dropboxusercontent.com/u/4781807/episode-sort.html" target="_blank">And then I stole it from here and updated it!</a> Hooray, the cycle of theft continues unabated! - S<br>
	Updated again two years later. This will also show your top 90 in episode order after the main table to facilitate copying. - S<br>
	Another year, another update. If you're actually still using this with this many episodes, I apologize in advance.
</p>

<table id="mainTable" align="center">
	<tbody><tr>
		<td id="battleNumber" colspan="3" style="padding-bottom: 10px;" style="text-align:center;">Battle No.1<br>0% sorted.</td>
	</tr>
	<tr>
		<td id="leftField" onclick="if(finishFlag==0) sortList(-1);" rowspan="2" style="text-align:center;"></td>
		<td class="middleField" onclick="if(finishFlag==0) sortList(0);" style="text-align:center;">
			I Like Both
		</td>
		<td id="rightField" onclick="if(finishFlag==0) sortList(1);" rowspan="2"style="text-align:center;"></td>
	</tr>
	<tr>
		<td class="middleField" onclick="if(finishFlag==0) sortList(0);"style="text-align:center;">
			No Opinion
		</td>
	</tr>
</tbody></table>
<br><br>
<div id="resultField" style="text-align: center;">
<br><br>
</div>
<script type="text/javascript">
<!--
	initList();
	showImage();
//-->
</script>
</body>
</html>
